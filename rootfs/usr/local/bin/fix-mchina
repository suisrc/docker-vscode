#!/bin/bash

## 更改镜像源为上海交通大学,如果已经是上海交通大学镜像源,跳过
if [ `cat /etc/apt/sources.list | grep -c sjtu` -eq 0 ]; then
    cp /etc/apt/sources.list /etc/apt/sources.list.bak && \
    sed -i \
      -e "s|deb.debian.org|mirrors.sjtug.sjtu.edu.cn|g" \
      -e "s|security.debian.org|mirrors.sjtug.sjtu.edu.cn|g" \
      -e "s|archive.ubuntu.com|mirrors.sjtug.sjtu.edu.cn|g" \
      -e "s|security.ubuntu.com|mirrors.sjtug.sjtu.edu.cn|g" \
      /etc/apt/sources.list;
    echo "change to sjtu mirror...";
else 
    echo "no need to change";
fi
